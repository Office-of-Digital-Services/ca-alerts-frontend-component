<div data-nosnippet id="ca_alert">
  <h1>[ALERT_HEADING]</h1>
  <p>
    [ALERT_BODY]
    <a
      href="[ALERT_TARGET_URL]"
      class="[ALERT_LINK_CLASS_HIDDEN]"
      target="_parent"
      >Get more info.</a
    >
  </p>
  <button id="close_button" aria-label="Dismiss this alert">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<script>
  ((/** @type {Window} */ _window, /** @type {Document} */ _document) => {
    /**
     * Minify friendly getElementById
     */
    const _getElementById = (
      /** @type {Document} */ _Document,
      /** @type {string} */ _id
    ) => _Document.getElementById(_id);

    /**
     * Minify friendly addEventListener
     */
    const _addEventListener = (
      /** @type {Element | Window} */ _Element,
      /** @type {string} */ _type,
      /** @type {EventListener} */ _listener
    ) => _Element.addEventListener(_type, _listener);

    const iFrame = _getElementById(_window.parent.document, "ca_alert_frame");

    /**
     * Set the outer iFrame height to match the inner content
     */
    const updateFrameHeight = () => {
      iFrame.style.height = `${
        _getElementById(_document, "ca_alert").offsetHeight
      }px`;
      iFrame.className = ""; //Whatever classes we set to hide will be cleared
    };

    // Need to set the frame height when loaded AND during resize
    _addEventListener(_window, "DOMContentLoaded", updateFrameHeight);
    _addEventListener(_window, "resize", updateFrameHeight);
    _addEventListener(
      _getElementById(_document, "close_button"),
      "click",

      () => {
        iFrame.style.display = "none"; //Will not be overridden by a resize to remove the hidden class

        //make sure CaAlertsLocalStorageMessageDismissed matches in alert-code.js

        localStorage.setItem(
          "CaAlertsLocalStorageMessageDismissed",
          "[ALERT_ACTIVE_MESSAGE_HTML_URL]"
        );
      }
    );
  })(window, document);
</script>
<style>
  body {
   margin: 0;
  }
  .hidden {
   display: none; /* This is used to hide the link only, not for hiding the frame */
  }
  #ca_alert {
   background: #fff;
   padding: 1rem;
   font-family: Open-Sans, Arial, Helvetica, sans-serif;
   line-height: 1.5rem;
   color: #333;
  }
  p {
   margin: 0.5rem 0;
  }
  h1 {
   position: relative;
   margin: 0;
   font-size: 1.2rem;
  }
  p, h1 {
   margin-left: 1.25rem;
  }
  h1::before {
   content: "!";
   width: 1.5rem;
   background: #e07000;
   border-radius: 50%;
   text-align: center;
   position: absolute;
   left: -1.8rem;
  }
  a {
   color: #046b99;
  }
  button {
   font-family: inherit; /* needed for Safari */
   color: #757575;
   border-radius: 50%;
   border: 1px solid #757575;
   background: #fff;
   height: 1.5rem;
   width: 1.5rem;
   font-size: 1.5rem;
   line-height: 1.5rem;
   padding: 0;
   position: absolute;
   top: 0.25rem;
   right: 0.25rem;
  }
  button:hover {
   background: #e8e8e8;
   cursor: pointer;
  }
</style>
