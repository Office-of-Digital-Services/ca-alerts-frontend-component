<div data-nosnippet>
  <h1>[ALERT_HEADING]</h1>
  <p>
    [ALERT_BODY]
    <a
      href="[ALERT_TARGET_URL]"
      class="[ALERT_LINK_CLASS_HIDDEN]"
      target="_parent"
      >Get more info.</a
    >
  </p>
  <button aria-label="Dismiss this alert">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<script>
  ((/** @type {Window} */ _window, /** @type {Document} */ _document) => {
    /**
     * Minify friendly addEventListener
     */
    const _addEventListener = (
      /** @type {Element | Window} */ _Element,
      /** @type {string} */ _type,
      /** @type {EventListener} */ _listener
    ) => _Element.addEventListener(_type, _listener);

    const iFrame = /** @type {HTMLObjectElement} */ (_window.frameElement);
    /**
     * Set the outer iFrame height to match the inner content
     */
    const updateFrameHeight = () => {
      iFrame.height = `${_document.documentElement.offsetHeight}`;
      iFrame.className = ""; //Whatever classes we set to hide will be cleared
    };

    // Need to set the frame height when loaded AND during resize
    _addEventListener(_window, "DOMContentLoaded", updateFrameHeight);
    _addEventListener(_window, "resize", updateFrameHeight);
    _addEventListener(_document.querySelector("button"),
      "click",
      () => {
      localStorage.setItem(
        "CaAlertsLocalStorageMessageDismissed", //make sure CaAlertsLocalStorageMessageDismissed matches in alert-code.js
        "[ALERT_ACTIVE_MESSAGE_HTML_URL]"
      );

      iFrame.parentNode.removeChild(iFrame);
    });
  })(window, document);
</script>
<style>
  body {
   margin: 0;
   background: #fff;
   padding: 1rem;
   font-family: Open-Sans, Arial, Helvetica, sans-serif;
   line-height: 1.5rem;
   color: #333;
  }
  .hidden {
   display: none; /* This is used to hide the link only, not for hiding the frame */
  }

  p {
   margin: 0.5rem 0;
  }
  h1 {
   position: relative;
   margin: 0;
   font-size: 1.2rem;
  }
  p, h1 {
   margin-left: 1.25rem;
  }
  h1::before {
   content: "!";
   width: 1.5rem;
   background: #e07000;
   border-radius: 50%;
   text-align: center;
   position: absolute;
   left: -1.8rem;
  }
  a {
   color: #046b99;
  }
  button {
   font-family: unset; /* needed for Safari */
   color: #757575;
   border-radius: 50%;
   border: 1px solid;
   background: unset;
   height: 1.5rem;
   width: 1.5rem;
   font-size: 1.5rem;
   line-height: unset;
   padding: 0;
   position: absolute;
   top: 0.25rem;
   right: 0.25rem;
   cursor: pointer;
  }
  button:hover {
   background: #e8e8e8;
  }
</style>
